{% extends "base.html" %}
{% from 'components/notifications.html' import alert %}

{% block head_scripts %}
    <meta name="description" content="Página de login para o painel de administração do sistema Thunder Command.">
{% endblock %}
{% block body_content %}
    <div class="login-page">
        <!-- Partículas de fundo -->
        <div class="bg-particles" id="bg-particles"></div>
        
        <!-- Container do formulário de login -->
        <div class="login-container">
            <div class="login-header">
                <div class="login-logo">
                    <img src="/static/img/logo_banner.png" alt="Logo Thunder Command" width="200"  class="mb-3">
                </div>
                <h1 class="login-title">Thunder COMMAND</h1>
                <p class="login-subtitle">Sistema de Controle Remoto</p>
            </div>
            
            <!-- Bloco de erro mostrado apenas quando houver falha na autenticação -->
            {% if error %}
                {{ alert(error, type="danger", dismissible=false) }}
            {% endif %}
            
            <!-- Formulário de autenticação -->
            <form method="post">
                <div class="form-group">
                    <label for="username">Usuário</label>
                    <div class="input-group">
                        <input type="text" id="username" name="username" class="form-control" required autofocus 
                               placeholder="Digite seu nome de usuário">
                        <span class="input-icon">
                            <i class="fas fa-user"></i>
                        </span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="password">Senha</label>
                    <div class="input-group">
                        <input type="password" id="password" name="password" class="form-control" required
                               placeholder="Digite sua senha">
                        <span class="input-icon">
                            <i class="fas fa-lock"></i>
                        </span>
                    </div>
                </div>
                
                <button type="submit" class="btn-login">
                    <i class="fas fa-sign-in-alt me-2"></i>Acessar Painel
                </button>
            </form>
            
            <!-- Informações adicionais para o usuário -->
            <div class="login-footer">
                <p><i class="fas fa-shield-alt me-1"></i> Acesso restrito ao painel de administração</p>
                <p><i class="fas fa-info-circle me-1"></i> Em caso de problemas, contate o administrador</p>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <!-- 
        Script de segurança básico para evitar que a página de login
        seja carregada dentro de um iframe (proteção contra clickjacking)
    -->
    <script>
        // Proteção contra clickjacking
        if (window.self !== window.top) {
            window.top.location.href = window.location.href;
        }
        
        // Criar partículas de fundo
        document.addEventListener('DOMContentLoaded', function() {
            const particlesContainer = document.getElementById('bg-particles');
            const numParticles = 25;
            
            if (particlesContainer) {
                // Criar partículas
                for (let i = 0; i < numParticles; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    
                    // Tamanho aleatório
                    const size = Math.random() * 10 + 5;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    
                    // Posição aleatória
                    const x = Math.random() * 100;
                    const y = Math.random() * 100;
                    particle.style.left = `${x}%`;
                    particle.style.top = `${y}%`;
                    
                    // Opacidade aleatória
                    const opacity = Math.random() * 0.2 + 0.05;
                    particle.style.opacity = opacity;
                    
                    // Duração da animação aleatória
                    const animationDuration = Math.random() * 20 + 10;
                    particle.style.animationDuration = `${animationDuration}s`;
                    
                    // Delay da animação aleatório
                    const animationDelay = Math.random() * 5;
                    particle.style.animationDelay = `${animationDelay}s`;
                    
                    particlesContainer.appendChild(particle);
                }
            }
            
            // Focar no campo de usuário
            const usernameField = document.getElementById('username');
            if (usernameField) {
                usernameField.focus();
            }
        });
    </script>
{% endblock %}